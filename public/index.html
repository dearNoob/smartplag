<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartPlug Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="./style.css">

</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>SmartPlug Dashboard</h1>
            <div class="header-controls">
                <button class="btn" onclick="refreshData()">
                    <span id="refresh-btn">ðŸ”„ Refresh</span>
                </button>
                <form action="/logout" method="POST" style="display: inline;">
                    <button type="submit" class="btn btn-secondary">Logout</button>
                </form>
            </div>
        </div>

        <!-- Main Dashboard -->
        <div class="dashboard-grid">
            <!-- Device Status Card -->
            <div class="card status-card">
                <h3>Device Status</h3>
                <button id="powerSwitch" class="power-switch off" onclick="togglePower()">
                    âš¡
                </button>
                <div id="statusText" class="status-text offline">OFFLINE</div>
                <div id="deviceName" class="device-info">
                    <input type="text" class="device-name" id="deviceNameInput" placeholder="Device Name">
                    <button class="btn" onclick="renameDevice()">Rename</button>
                </div>
            </div>

            <!-- Real-time Metrics -->
            <div class="card">
                <h3>Real-time Metrics</h3>
                <div class="metrics-grid">
                    <div class="metric">
                        <span id="powerValue" class="metric-value">0</span>
                        <div class="metric-label">Power (W)</div>
                    </div>
                    <div class="metric">
                        <span id="voltageValue" class="metric-value">0</span>
                        <div class="metric-label">Voltage (V)</div>
                    </div>
                    <div class="metric">
                        <span id="currentValue" class="metric-value">0</span>
                        <div class="metric-label">Current (A)</div>
                    </div>
                    <div class="metric">
                        <span id="energyValue" class="metric-value">0</span>
                        <div class="metric-label">Total Energy (kWh)</div>
                    </div>
                </div>
            </div>
        </div>

                    <!-- Energy Usage Chart -->
            <div class="card" style="grid-column: 1 / -1;">
                <h3>Energy Usage Trends</h3>
                <div class="chart-controls">
                    <button class="active" onclick="switchChart('daily')">Daily</button>
                    <button onclick="switchChart('weekly')">Weekly</button>
                    <button onclick="switchChart('monthly')">Monthly</button>
                </div>
                <div class="chart-container">
                    <canvas id="energyChart"></canvas>
                </div>
            </div>

        <!-- Controls Section -->
        <div class="controls-section">
            <!-- Timer Control -->
            <div class="timer-section">
                <h3>Set Timer</h3>
                <div class="form-group">
                    <label for="timerMinutes">Duration (minutes):</label>
                    <input type="number" id="timerMinutes" min="1" max="1440" value="30">
                </div>
                <div class="form-group">
                    <label for="timerAction">Action:</label>
                    <select id="timerAction">
                        <option value="off">Turn OFF</option>
                        <option value="on">Turn ON</option>
                    </select>
                </div>
                <button class="btn" onclick="setTimer()">Set Timer</button>
                
                <div id="activeTimers">
                    <!-- Active timers will be displayed here -->
                </div>
            </div>

            <!-- Schedule Control -->
            <div class="schedule-section">
                <h3>Schedules</h3>
                <div class="form-group">
                    <label for="scheduleTime">Time:</label>
                    <input type="time" id="scheduleTime">
                </div>
                <div class="form-group">
                    <label for="scheduleDays">Days:</label>
                    <select id="scheduleDays" multiple>
                        <option value="1">Monday</option>
                        <option value="2">Tuesday</option>
                        <option value="3">Wednesday</option>
                        <option value="4">Thursday</option>
                        <option value="5">Friday</option>
                        <option value="6">Saturday</option>
                        <option value="0">Sunday</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="scheduleAction">Action:</label>
                    <select id="scheduleAction">
                        <option value="on">Turn ON</option>
                        <option value="off">Turn OFF</option>
                    </select>
                </div>
                <button class="btn" onclick="addSchedule()">Add Schedule</button>

                <div class="schedule-list" id="scheduleList">
                    <!-- Schedules will be displayed here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification" class="notification"></div>
    <script src="script.js"></script>

</body>
</html>